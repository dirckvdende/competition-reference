
\documentclass[dvipsnames]{article}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{anyfontsize}
\usepackage{bbm}
\usepackage{blindtext}
\usepackage{datetime}
\usepackage{enumitem}
\usepackage{fancyhdr}
\usepackage[a4paper, margin={1cm, 1.5cm}, headheight=0pt, headsep=10pt]{geometry}
\usepackage{graphics}
\usepackage{graphicx}
\usepackage[utf8]{inputenc}
\usepackage{lipsum}
\usepackage{makecell}
\usepackage{minted}
\usepackage{multicol}
\usepackage[skip=6pt]{parskip}
\usepackage{setspace}
\usepackage{tikz}
\usetikzlibrary{patterns}
\usepackage[explicit]{titlesec}
\usepackage[dotinlabels]{titletoc}
\usepackage{xcolor}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Style options
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\allowdisplaybreaks
\setlist{leftmargin=4.5mm,nosep}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Custom commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

\newcommand{\code}[2][cpp]{\inputminted[fontsize=\small,tabsize=4,breaklines,baselinestretch=0.9]{#1}{#2}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Custom title styles
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\titlespacing\section{0pt}{8pt}{4pt}
\titlespacing\subsection{0pt}{8pt}{4pt}
\titlespacing\subsubsection{0pt}{13pt}{2pt}

\titleformat{\title}{\Huge\bfseries}{}{}{#1}

\titleformat{\section}{\normalfont}{}{0em}{\centering \colorbox{ForestGreen}{
\begin{minipage}{\linewidth - 14pt}
    \centering
    \bfseries \textcolor{white}{\thesection. #1}
\end{minipage}
}}

\titleformat{\subsection}{\normalfont}{}{0em}{\centering \colorbox{MidnightBlue}{
\begin{minipage}{\linewidth - 14pt}
    \centering
    \bfseries \textcolor{white}{\thesubsection. #1}
\end{minipage}
}}

\titleformat{\subsubsection}{\normalfont}{}{0em}{\centering
    \bfseries #1
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Headers and footers
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setlength{\headheight}{15pt}
\pagestyle{fancyplain}
\lhead{Reference Document - \input{author.tex}}
\chead{}
\rhead{Page \thepage/\pageref{LastPage}}
\lfoot{}
\cfoot{}
\rfoot{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Custom table of contents styles
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\titlecontents{section}
    [7mm]{\normalsize}{\contentslabel{5mm}}{}{\titlerule*[1pc]{}\contentsmargin{4mm}\contentspage}[]
\titlecontents{subsection}
    [12mm]{\normalsize}{\contentslabel{10mm}}{}{\titlerule*[1pc]{}\contentsmargin{4mm}\contentspage}[]

% This title is not actually used in the document...
\title{Programming Competition Reference}

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Compact margins
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setlength{\abovedisplayskip}{0pt}
\setlength{\belowdisplayskip}{0pt}
\setlength{\abovedisplayshortskip}{0pt}
\setlength{\belowdisplayshortskip}{0pt}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 2-column pages, with gray separator
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setlength{\columnseprule}{1pt}
\setlength{\columnsep}{0.5cm}
\def\columnseprulecolor{\color{gray}}

\begin{multicols}{2}

\addtocontents{toc}{\protect\setcounter{secnumdepth}{-5}}
\addtocontents{toc}{\protect\setcounter{tocdepth}{-5}}
{\hspace{1pt}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Main title and logo
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{center}

    {\bfseries \fontsize{19}{23}\selectfont Reference Document}
    
    \vspace{0pt}
    
    \textit{\input{author.tex}}

    \begin{figure}[H]
    \centering
    \includegraphics[width=100pt]{logo.png}
    \label{fig:logo}
\end{figure}
\end{center}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Table of contents
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
\renewcommand\tableofcontents{
    \@starttoc{toc}
}
\makeatother
\addtocontents{toc}{\protect\setcounter{secnumdepth}{2}}
\addtocontents{toc}{\protect\setcounter{tocdepth}{2}}
\setcounter{tocdepth}{2}
{\tableofcontents}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Main content
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{content.tex}

\end{multicols}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Extra info at the end
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{\color{gray}\centering

This document was generated on \today, at \currenttime.

If you find any errors/mistakes, or want to suggest an addition, please create a pull request on GitHub.

}

% Used to show "Page x/y" at the top right
\label{LastPage}

\end{document}
